# 第一章 操作系统引论

操作系统是一组<u>控制和管理计算机硬件和软件资源</u>，合理地<u>对各类作业进行调度</u>，以及<u>方便用户使用</u>的**程序**的集合。

![第一章 操作系统引论](C:\Users\25580\Desktop\myporject\Reading-Note\操作系统\picture\第一章 操作系统引论.png)

## 目录

[TOC]

## 1	计算机层级结构

![第一章 计算机系统层级结构](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1584790879527&di=d34eccc966c25418e3a876beb458513d&imgtype=0&src=http%3A%2F%2Fa0.att.hudong.com%2F07%2F86%2F01200000184904134390867172473_s.jpg)



## 2	操作系统的目标

根据不同类型OS有着各自不同的侧重目标

### 2.1	有效性

- 提高资源利用率：CPU/内外存/IO设备资源，保持资源忙碌，减少必要的额外开销
- 提高系统吞吐量：组织系统工作流程来让单位时间的工作量变大

### 	2.2	方便性

- 编译命令
- 图形界面
- 系统调用

### 	2.3	可扩充性

- 增加功能和模块
- 修改功能和模块

### 	2.4	开放性

- 系统彼此兼容
- 系统之间能方便实现互连



## 3	操作系统的作用

从不同的角度看待OS的作用

### 	3.1	用户：用户与计算机硬件系统之间的接口

![第一章 OS作为接口的示意图](C:\Users\25580\Desktop\myporject\Reading-Note\操作系统\picture\第一章 OS作为接口的示意图.png)

通过命令、系统调用、图形窗口的方式来操作计算机系统硬件和运行自己的程序。	

### 	3.2	资源管理：计算机系统资源的管理者

对资源进行有效的管理，以及对资源使用情况的记录便于多个用户使用。

- 处理机管理：用于分配和控制处理机

- 存储器管理：主要负责内存的分配与回收

- I/O设备管理：负责I/O设备的分配与操纵

- 文件管理：负责文件的存取、共享和保护

### 	3.3	资源的抽象：实现了对计算机资源的抽象

对硬件资源进行多层次抽象，形成功能更强大的虚机器【覆盖了软件的机器】。

覆盖软件层次：物理接口 < I/O软件 < 文件管理软件 < 窗口软件



## 4	操作系统的发展

- 无操作系统的计算机系统：纸带输入；I/O设备与CPU速度非常不匹配。

- 单批到处理系统：加入监督程序，使系统自动、顺序、单道【一次只执行一个】的执行作业。
- 多批道处理系统：多作业可交替运行，但需要排队且时间较长；一旦交付作业就无法进行修改；作业大多驻留外存；高吞吐量。
- 分时系统：多人使用；人-机交互；作业是直接进入内存；每个作业都只运行很短的时间，使得每个作业都能及时的得到处理；具有多路性、独立性、及时性、交互性的特点。
- 实时系统：实时控制与信息处理；更多的是用于生产等；具有多路性、独立性、及时性、交互性、可靠性的特点。
- 微机操作系统：配置于微型机上；有单用户单任务、单用户多任务、多用户多任务



## 5	操作系统的基本特性

并发于共享互为存在的条件

### 5.1	并发性

- 并发：两个或多个事件同一时间间隔内发生【分时交替执行】。
- 并行：两个或多个事件同一时刻发生【多处理机执行】。
- 进程：是指在系统中能独立运行并作为资源分配的基本单位，它是由一组机器指令、数据和堆栈等组成的，是一个能独立运行的活动实体。多个进程之问可以并发执行和交换信息。
- 线程：在一个进程中可以包含若干个线程，它们可以利用进程所拥有的资源，线程比进程更小，基本上不拥有系统资源，故对它的调度所付出的开销就会小得多，能更高效地提高系统内多个程序问并发执行的程度。因此在引入线程的OS中，通常都是把进程作为分配资源的基本单位，而把线程作为独立运行和独立调度的基本单位。

### 5.2	共享性

- 资源共享/复用：指系统中的资源可供内存中多个并发执行的进程(线程)共同使用。
- 互斥共享方式：进程只能访问空闲资源，仅当访问完并释放资源后才允许另外的进程访问。
- 临界/独占资源：在一段时问内只允许一个进程访问的资源。
- 同时访问方式：宏观上若干个用户同时访问。

### 5.3	虚拟技术

- 虚拟：通过某种技术把一个物理实体变成逻辑上的对应物。
- 时分复用技术：分时使用方式【一人用一小段时间】。
- 虚拟处理机技术：分时使用 一台物理处理机，把一台物理机虚拟为多台逻辑上的处理机，每人独占一台虚拟处理机。

- 虚拟设备技术：分时使用一台物理I/O设备，同上。
- 空分复用技术：类比频分复用技术【一人占一条频率较窄的信道】。
- 虚拟磁盘技术：一台磁盘虚拟成多台，例如分卷。
- 虚拟存储器技术：结合空分复用与时分复用，从逻辑上扩大内存，使得程序的各个部分分时进入内存。物理设备使用的空间与时间都会均分给虚拟设备。

### 5.4	异步性

- 异步性：进程推进的速度不可知，可能是先进入内存的作业先完成，也可能是后进入的。可通过进程同步机制令每次运行所得结果相同。



## 6	操作系统的主要功能

### 6.1	处理机管理功能

- 进程控制：创建和撤消进程(线程)，以及控制进程状态转换。
- 进程同步：对诸进程(线程)的运行进行协调，进程互斥方式-锁，进程同步方式-信号量机制。
- 进程通信：实现进程(线程)之问的信息交换，在同一系统时可用直接通信方式-消息队列
- 调度：按照一定的算法把处理机分配给进程(线程)，作业调度【分配资源调入内存-》建立进程就绪-》插入就绪队列】，进程(线程)调度【就绪队列-》分配处理机，设置运行现场-》执行】

### 6.2	存储器管理功能

- 内存分配：有静态、动态两种方式；具有内存分配功能、内存回收功能、内存分配数据结构(记录内存分配的情况)。
- 内存保护：设置内存保护机制(硬件检查越界，后软件处理)以确保程序只在自己的内存区运行。
- 地址映射：在硬件的支持下将地址空问中的逻辑地址转换为内存空问中与之对应的物理地址。
- 内存扩充：通过请求调入与置换实现内存扩容机制，通过虚拟存储技术在逻辑上扩充内存。

### 6.3	设备管理功能(外围设备)

- 缓冲管理：在I/O设备和CPU之间引入缓冲以解决两者速度不匹配问题。
- 设备分配：根据请求与分配策略分配(回收)所需设备，必要时还须分配设备对应的控制器和通道。
- 设备处理：用于实现CPU和设备控制器之问的通信。

### 6.4	文件管理功能

- 存储空间管理：为每个文件分配必要外存空间。
- 目录管理：建立目录项实现按名存取、文件共享、快速目录查询。
- 文件读/写管理：根据请求从外存读取与写入。
- 文件保护：防止系统中的文件被非法盗取和破坏。

### 6.3	操作系统与用户间的接口

- 用户接口：它是提供给用户使用的接口，用户可通过该接口取得操作系统的服务。可进一步分为：联机用户接口、脱机用户接口、图形用户接口。
- 程序接口：它是提供给程序员在编程时使用的接口，是用户程序取得操作系统服务的惟一途径。



## 7、操作系统结构设计

### 7.1	传统结构

- 无结构操作系统：一组过程的集合，系统内部繁杂又混乱
- 模块化结构：采用模块-接口法进行设计，模块之下还能有子模块；以内聚性(内部各部分问联系的紧密程度)与耦合度(模块问相互联系和相互影响的程度)来衡量模块独立性；有良好的可理解性、可维护性、适应性；存在接口需求难以规定，各种决定的无序性。
- 分层式结构：引入有序分层法，将一个操作系统分为若干个层次，采用自底向上法来铺设中问层，每层又由若干个模块组成，高层仅依赖于紧邻它的低层；保证系统的正确性、易扩充与易维护性；但开销增加，效率变低了。

### 7.2	C/S模式

- 组成：客户机、服务器、网络系统。
- 交互：客户发送请求-》服务器接收消息-》服务器回送消息-》客户机接收消息。
- 优点：数据分布处理和存储、便于集中管理、灵活可扩充、易于改写软件。
- 缺点：存在不可靠性和瓶颈问题。

### 7.3	面向对象程序设计

- 将面向对象技术用于系统设计的优点：通过重用提高构建新系统的效率与质量；通过继承和封装使系统更易修改和拓展；独立对每个对象测试保证了整个系统的正确性和可靠性。

### 7.4	微内核结构

- 描述：足够小的内核【只实现OS的最基本、最核心部分、与硬件相关的】；C/S模式【通过消息传递机制实现内核部分与服务器(系统其余功能)中的系统功能见的信息交互】；应用“机制与策略分离”原理【把机制放在内核中，策略放在服务器中(机制指实现某一功能的具体执行机构。策略是在机制的基础上，借助于某些参数和算法来实现该功能的优化，或达到不同的功能目标)】；采用面向对象技术。
- 内核的功能：进程(线程)管理【不包括策略的处理机】；低级存储器管理【地址映射】；中断和陷入处理【捕获这俩并前期处理】
- 优点：可拓展性、可靠性、可移植性、支持分布式系统、融入面向对象
- 问题：运行效率降低【消息均需要通过内核传递，与多次上下文切换】
